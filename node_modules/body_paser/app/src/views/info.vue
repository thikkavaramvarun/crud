<template>
  <div>
    <van-nav-bar
    title="详情"
    left-text="返回"
    left-arrow
    @click-left="onClickLeft"
    />
    <van-swipe :autoplay="3000">
  <van-swipe-item v-for="(image, index) in images" :key="index">
    <img v-lazy="image" />
  </van-swipe-item>
</van-swipe>
    <div>
        <h3>{{ obj.title }}</h3>
        <span>{{ obj.desc }}</span>
        <img :src="obj.thumb" alt="">
        <span>{{ obj.wen }}</span>
    </div>
    <van-goods-action>
        <van-goods-action-icon icon="chat-o" text="客服" dot @click="diag"/>
        <van-goods-action-icon icon="star-o" text="收藏" :badge="badge" @click="starts"/>
        <van-goods-action-icon icon="shop-o" text="店铺" dot @click="diag"/>
        <van-goods-action-button type="warning" text="加入购物车" />
        <van-goods-action-button type="danger" text="立即购买" />
    </van-goods-action>
    <van-action-sheet v-model="show" title="我的收藏">
        <van-card
        :num="item.num"
        :price="item.price"
        :desc="item.desc"
        :title="item.title"
        thumb="https://img01.yzcdn.cn/vant/cat.jpeg"
        v-for="(item, index) in startslist" :key="index"
        >
        <template #num>
            <van-icon name="star" size="20" color="#1989fa" @click="shoucan"/>
        </template>
        </van-card>
    </van-action-sheet>
    <el-dialog
      title="提示"
      :visible.sync="centerDialogVisible"
      width="90%"
      center>
      <img src="../assets/阿里嘎多.png" />
      <span class="wenzi"></span>
      <span slot="footer" class="dialog-footer">
        <el-button @click="centerDialogVisible = false">取 消</el-button>
        <el-button type="primary" @click="centerDialogVisible = false">确 定</el-button>
      </span>
    </el-dialog>
  </div>
</template>

<script>
import axios from 'axios'
import Vue from 'vue';
import { Lazyload } from 'vant';
import { mapActions, mapState } from 'vuex';

Vue.use(Lazyload);
export default {
  data() {
    return {
      images: [
        'https://img01.yzcdn.cn/vant/apple-1.jpg',
        'https://img01.yzcdn.cn/vant/apple-2.jpg',
      ],
      id:'',
      obj:{
        title:'',
        desc:'',
        thumb:'',
        wen:'',
        id:''
      },
      show:false,
      centerDialogVisible: false
    };
  },
  created(){
    this.id=this.$route.params.id
    this.init()
  },
  computed:{
    ...mapState('starts',['startslist'])
  },
  methods:{
    init(){
        axios({
            url:'/shop/info',
            method:'post',
            data:{id:this.id}
        }).then(res=>{
            this.obj=res.data.data
        })
    },
    onClickLeft(){
        this.$router.back()
    },
    starts(){
        this.show=true
    },
    shoucan(e){
        this.del_start_list(e)
    },
    diag(){
      this.centerDialogVisible=true
    },
    ...mapActions('starts',['del_start_list'])
  }
};
</script>

<style>
img{
    width: 100%;
    height: 200px;
}
.wenzi{
  display: flex;
  justify-content: center;
  font-weight: bolder;
}
</style>